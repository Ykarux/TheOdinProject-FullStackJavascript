<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Linked list</title>
	</head>
	<body>
		<script>
			function Node(data) {
				let value = data
				let nextNode = null
				return {
					value,
					nextNode
				}
			}

			function LinkedList() {
				let length = 0
				let headNode = null

				function append(value) {
					const newNode = Node(value)
					length++
					if (headNode === null) {
						headNode = newNode
					}
					let pointer = headNode
					while (pointer.nextNode !== null) {
						pointer = pointer.nextNode
					}
					pointer.nextNode = newNode
				}

				function prepend(value) {
					const newNode = Node(value)
					length++
					if (headNode !== null) {
						headNode = newNode
					}
					newNode.nextNode = headNode
					headNode = newNode
				}

				function size() {
					return length
				}

				function head() {
					return headNode
				}

				function tail() {
					if (headNode === null) {
						return null
					}
					let pointer = headNode
					while (pointer.nextNode !== null) {
						pointer = pointer.nextNode
					}
					return pointer
				}

				function at(index) {
					if (headNode === null || index < 0) {
						return null
					}
					let pointer = headNode
					for (let i = 0; i < index; i++) {
						pointer = pointer.nextNode
					}
					return pointer
				}

				function pop() {
					let pointer = headNode
					while (pointer.nextNode !== null) {
						pointer = pointer.nextNode
					}
					pointer.nextNode = null
					length--
				}

				function contains(value) {
					let pointer = headNode
					while (pointer.nextNode !== null) {
						if (pointer.value === value) {
							return true
						}
						pointer = pointer.nextNode
					}
					return (pointer.value === value)
				}

				function find(value) {
					let pointer = headNode
					let index = 0
					while (pointer.nextNode !== null) {
						if (pointer.value === value) {
							return index
						}
						index++
						pointer = pointer.nextNode
					}
					return (pointer.value === value) ? true : null
				}

				function toString() {
					let str = ''
					let pointer = headNode
					while (pointer.nextNode !== null) {
						str += '(' + pointer.value + ') -> '
						pointer = pointer.nextNode
					}
					str += '(' + pointer.value + ') -> null'
					return str
				}

				function insertAt(value, index) {
					let previous = at(index - 1)
					let current = at(index)
					const newNode = Node(value)
					previous.nextNode = newNode
					newNode.nextNode = current
					length++
				}

				function removeAt(index) {
					let previous = at(index - 1)
					previous.nextNode = at(index + 1)
					length--
				}


				return {
					size,
					head,
					append,
					prepend,
					tail,
					at,
					pop,
					contains,
					find,
					toString,
					insertAt,
					removeAt
				}
			}
		</script>
	</body>
</html>